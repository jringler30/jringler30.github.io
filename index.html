<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Joshua Ringler — Analytics, Decision Systems, Strategy" />
  <title>Joshua Ringler</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,300;0,6..72,400;0,6..72,500;0,6..72,600;1,6..72,300;1,6..72,400&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- ============ NAVBAR ============ -->
  <header class="nav" id="navbar">
    <nav class="nav__inner" aria-label="Primary">
      <a href="#" class="nav__logo" aria-label="Home">JR</a>
      <ul class="nav__links" role="list">
        <li><a href="#about" class="nav__link" data-nav>About</a></li>
        <li><a href="#work" class="nav__link" data-nav>Work</a></li>
        <li><a href="#experience" class="nav__link" data-nav>Experience</a></li>
        <li><a href="#skills" class="nav__link" data-nav>Skills</a></li>
        <li><a href="#contact" class="nav__link" data-nav>Contact</a></li>
      </ul>
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode" type="button">
        <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"/></svg>
      </button>
    </nav>
  </header>

  <main>

    <!-- ============ HERO / ABOUT ============ -->
    <section class="hero" id="about">
      <div class="container hero__grid">
        <div class="hero__text">
          <p class="hero__kicker anim" style="--i:0">Analytics · Strategy · Decision Systems</p>
          <h1 class="hero__name anim" style="--i:1">Joshua<br>Ringler</h1>
          <p class="hero__pitch anim" style="--i:2">
            Building analytical systems that turn complex data into clear business decisions. MS Business Analytics at UT&nbsp;Austin McCombs — I design optimization engines, data pipelines, and decision tools for high-stakes&nbsp;problems.
          </p>
          <ul class="hero__creds anim" style="--i:3" aria-label="Credentials">
            <li>Wayfair Data Analyst Intern</li>
            <li>Bell Flight Business Analyst</li>
            <li>1st Place Purdue Research Expo</li>
            <li>Built Production Streamlit Systems</li>
          </ul>
          <div class="hero__cta anim" style="--i:4">
            <a href="#work" class="btn">View Work</a>
            <a href="#contact" class="btn btn--ghost">Contact</a>
          </div>
        </div>
        <div class="hero__photo anim" style="--i:2">
          <img src="assets/images/headshot.png" alt="Joshua Ringler headshot" width="400" height="400" loading="eager" />
        </div>
      </div>
    </section>

    <!-- ============ SELECTED WORK ============ -->
    <section class="section" id="work">
      <div class="container">
        <header class="section__head">
          <span class="label">Selected Work</span>
          <h2>Systems I've built.</h2>
        </header>

        <!-- Filter chips -->
        <div class="filters" role="group" aria-label="Filter projects">
          <button class="chip active" data-filter="all" type="button">All</button>
          <button class="chip" data-filter="optimization" type="button">Optimization</button>
          <button class="chip" data-filter="dashboard" type="button">Dashboard</button>
          <button class="chip" data-filter="ml-nlp" type="button">ML / NLP</button>
          <button class="chip" data-filter="network" type="button">Network</button>
        </div>

        <!-- Project grid -->
        <div class="projects" id="projectGrid">

          <article class="card" data-tags="optimization"
            data-title="Portfolio TLH Optimizer"
            data-desc="Optimization engine that models tax-loss harvesting strategies across user-defined portfolios. Features scenario analysis, constraint handling, and interactive KPI reporting — deployed as a production Streamlit application for the Vise capstone. Enables retail investors to systematically identify and execute TLH opportunities across diversified holdings."
            data-stack="Python, Streamlit, Pandas, Optimization"
            data-img="assets/images/dashboard.png"
            data-link="https://github.com/jringler30/portfolio-tlh-optimizer"
            tabindex="0" role="button" aria-label="View Portfolio TLH Optimizer details">
            <div class="card__img">
              <img src="assets/images/dashboard.png" alt="Portfolio TLH Optimizer screenshot" loading="lazy" />
            </div>
            <div class="card__body">
              <h3 class="card__title">Portfolio TLH Optimizer</h3>
              <p class="card__impact">Improves after-tax returns with automated tax-aware rebalancing.</p>
              <p class="card__desc">Tax-loss harvesting engine with scenario analysis and interactive KPI reporting via Streamlit.</p>
              <ul class="card__tags" aria-label="Technologies">
                <li>Python</li><li>Streamlit</li><li>Optimization</li>
              </ul>
            </div>
          </article>

          <article class="card" data-tags="dashboard"
            data-title="Financial Analytics Toolkit"
            data-desc="End-to-end pipeline for portfolio return calculations, factor decomposition, and interactive performance visualization. Built first in Jupyter as a research tool, then refactored and shipped as a Streamlit web application for broader team use. Supports WRDS data ingestion and automated reporting workflows."
            data-stack="Python, Streamlit, NumPy, Plotly"
            data-img="assets/images/google_colab_icon.png"
            data-link="https://github.com/jringler30/financial-analytics-toolkit"
            tabindex="0" role="button" aria-label="View Financial Analytics Toolkit details">
            <div class="card__img">
              <img src="assets/images/google_colab_icon.png" alt="Financial Analytics Toolkit screenshot" loading="lazy" />
            </div>
            <div class="card__body">
              <h3 class="card__title">Financial Analytics Toolkit</h3>
              <p class="card__impact">Compares rebalancing strategies to quantify risk/return tradeoffs.</p>
              <p class="card__desc">Portfolio return calculator with factor decomposition and interactive Plotly dashboards.</p>
              <ul class="card__tags" aria-label="Technologies">
                <li>Python</li><li>Analytics</li><li>Dashboard</li>
              </ul>
            </div>
          </article>

          <article class="card" data-tags="ml-nlp"
            data-title="ML &amp; NLP Research"
            data-desc="Applied machine learning projects spanning classification, clustering, and deep learning — including NLP sentiment analysis on earnings call transcripts to predict short-term stock returns. Covers logistic regression, PCA, Gaussian Mixture Models, neural networks, and forward-looking statement detection with strong correlation results."
            data-stack="scikit-learn, PyTorch, NLP, Pandas"
            data-img="assets/images/google_colab_icon.png"
            data-link="https://github.com/jringler30/applied-machine-learning"
            tabindex="0" role="button" aria-label="View ML and NLP Research details">
            <div class="card__img">
              <img src="assets/images/google_colab_icon.png" alt="ML and NLP research notebook" loading="lazy" />
            </div>
            <div class="card__body">
              <h3 class="card__title">ML &amp; NLP Research</h3>
              <p class="card__impact">Evaluates factor strategies with clean pipelines and reproducible results.</p>
              <p class="card__desc">Earnings call NLP, sentiment analysis, and applied ML spanning classification to deep learning.</p>
              <ul class="card__tags" aria-label="Technologies">
                <li>PyTorch</li><li>scikit-learn</li><li>ML/NLP</li>
              </ul>
            </div>
          </article>

          <article class="card" data-tags="network"
            data-title="Email Network Scraper"
            data-desc="Selenium-based web scraper that extracts communication metadata from email archives, then applies community detection algorithms on bipartite graphs to reveal hidden organizational structure and communication patterns. Designed for large-scale network analysis research."
            data-stack="Selenium, NetworkX, Python, Graph Theory"
            data-img="assets/images/gmail_icon.png"
            data-link="https://github.com/jringler30/email-network-scraper"
            tabindex="0" role="button" aria-label="View Email Network Scraper details">
            <div class="card__img">
              <img src="assets/images/gmail_icon.png" alt="Email network graph visualization" loading="lazy" />
            </div>
            <div class="card__body">
              <h3 class="card__title">Email Network Scraper</h3>
              <p class="card__impact">Reveals hidden organizational structure from communication metadata.</p>
              <p class="card__desc">Selenium scraper with community detection on bipartite email communication graphs.</p>
              <ul class="card__tags" aria-label="Technologies">
                <li>Selenium</li><li>NetworkX</li><li>Network</li>
              </ul>
            </div>
          </article>

          <article class="card" data-tags="ml-nlp"
            data-title="Connect 4 AI — CNN &amp; Transformer"
            data-desc="Deep learning agents trained via self-play and MCTS rollouts to master Connect 4. Implements CNN and Transformer architectures for board evaluation with a policy and rules filter for legal moves. Features an Anvil web app for human-vs-AI play, deployed on AWS Lightsail via Docker for real-time inference."
            data-stack="Python, PyTorch, CNN, Transformers, AWS, Anvil, Docker"
            data-img="assets/images/connect_4.png"
            data-link="https://github.com/jringler30/Connect4Bot"
            tabindex="0" role="button" aria-label="View Connect 4 AI details">
            <div class="card__img">
              <img src="assets/images/connect_4.png" alt="Connect 4 AI project" loading="lazy" />
            </div>
            <div class="card__body">
              <h3 class="card__title">Connect 4 AI — CNN &amp; Transformer</h3>
              <p class="card__impact">Trains self-play agents to improve win rate through deep learning.</p>
              <p class="card__desc">CNN and Transformer models for Connect 4 with MCTS data generation, AWS deployment, and a live Anvil web app.</p>
              <ul class="card__tags" aria-label="Technologies">
                <li>PyTorch</li><li>AWS</li><li>Deep Learning</li>
              </ul>
            </div>
          </article>

        </div>
      </div>
    </section>

    <!-- ============ EXPERIENCE ============ -->
    <section class="section section--alt" id="experience">
      <div class="container">
        <header class="section__head">
          <span class="label">Experience</span>
          <h2>Where I've worked.</h2>
        </header>
      </div>

      <!-- Horizontal timeline — full-bleed, scroll-snap -->
      <div class="htl-wrap">
        <div class="htl-controls">
          <span class="htl-indicator" id="htlIndicator">1 / 4</span>
          <div class="htl-arrows">
            <button class="htl-arrow" id="htlPrev" type="button" aria-label="Previous role">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
            </button>
            <button class="htl-arrow" id="htlNext" type="button" aria-label="Next role">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
            </button>
          </div>
        </div>

        <!-- Progress bar -->
        <div class="htl-progress"><div class="htl-progress__fill" id="htlProgress"></div></div>

        <!-- Rail line + dot markers (visual only) -->
        <div class="htl-rail" aria-hidden="true">
          <span class="htl-dot"></span>
          <span class="htl-dot"></span>
          <span class="htl-dot"></span>
          <span class="htl-dot"></span>
        </div>

        <!-- Scrollable track -->
        <div class="htl-track" id="htlTrack" role="list" tabindex="0" aria-label="Experience timeline">

          <article class="htl-card" role="listitem" tabindex="0"
            aria-describedby="tip-vise"
            data-tools="Streamlit, GitHub, Python, Optimization"
            data-bullets="Built TLH optimization engine with scenario analysis and constraint handling|Developed client-facing Streamlit dashboards deployed in production|Designed decision logic for automated portfolio rebalancing">
            <p class="htl-card__co">Vise</p>
            <h3 class="htl-card__role">Graduate Capstone Business Consultant</h3>
            <time class="htl-card__date">Jan 2026 – Present</time>
            <p class="htl-card__desc">Portfolio optimization and tax-loss harvesting systems for an automated investment platform.</p>
            <!-- Tooltip (hidden by default) -->
            <div class="htl-tip" id="tip-vise" role="tooltip">
              <p class="htl-tip__heading">Tools &amp; Impact</p>
              <ul class="htl-tip__tools"><li>Streamlit</li><li>GitHub</li><li>Python</li><li>Optimization</li></ul>
              <div class="htl-tip__highlight">
                <span class="htl-tip__highlight-label">Key Achievement:</span>
                Built TLH optimization engine with scenario analysis and constraint handling
              </div>
              <ul class="htl-tip__bullets">
                <li>Developed client-facing Streamlit dashboards deployed in production</li>
                <li>Designed decision logic for automated portfolio rebalancing</li>
              </ul>
            </div>
          </article>

          <article class="htl-card" role="listitem" tabindex="0"
            aria-describedby="tip-purdue"
            data-tools="NLP, Python, Text Classification"
            data-bullets="Applied NLP to unstructured text classification and pattern extraction|Awarded 1st place at Purdue undergraduate research exposition|Built reproducible analysis pipelines for large text corpora">
            <p class="htl-card__co">Purdue University · Daniels School</p>
            <h3 class="htl-card__role">NLP Research</h3>
            <time class="htl-card__date">Aug – Dec 2024</time>
            <p class="htl-card__desc">Unstructured text classification and pattern extraction. 1st place research exposition.</p>
            <div class="htl-tip" id="tip-purdue" role="tooltip">
              <p class="htl-tip__heading">Tools &amp; Impact</p>
              <ul class="htl-tip__tools"><li>NLP</li><li>Python</li><li>Text Classification</li></ul>
              <div class="htl-tip__highlight">
                <span class="htl-tip__highlight-label">Key Achievement:</span>
                Applied NLP to unstructured text classification and pattern extraction
              </div>
              <ul class="htl-tip__bullets">
                <li>Awarded 1st place at Purdue undergraduate research exposition</li>
                <li>Built reproducible analysis pipelines for large text corpora</li>
              </ul>
            </div>
          </article>

          <article class="htl-card" role="listitem" tabindex="0"
            aria-describedby="tip-wayfair"
            data-tools="SQL, Looker, Data Pipelines, Visualization"
            data-bullets="Informed category strategy and pricing decisions through commercial analytics|Built SQL and Looker-based data pipelines for merchandising leadership|Surfaced actionable insights at scale across product categories">
            <p class="htl-card__co">Wayfair</p>
            <h3 class="htl-card__role">Commercial Strategy Summer Data Analyst</h3>
            <time class="htl-card__date">May – Aug 2024</time>
            <p class="htl-card__desc">Commercial analytics informing category strategy and pricing decisions.</p>
            <div class="htl-tip" id="tip-wayfair" role="tooltip">
              <p class="htl-tip__heading">Tools &amp; Impact</p>
              <ul class="htl-tip__tools"><li>SQL</li><li>Looker</li><li>Data Pipelines</li></ul>
              <div class="htl-tip__highlight">
                <span class="htl-tip__highlight-label">Key Achievement:</span>
                Informed category strategy and pricing decisions through commercial analytics
              </div>
              <ul class="htl-tip__bullets">
                <li>Built SQL and Looker-based data pipelines for merchandising leadership</li>
                <li>Surfaced actionable insights at scale across product categories</li>
              </ul>
            </div>
          </article>

          <article class="htl-card" role="listitem" tabindex="0"
            aria-describedby="tip-bell"
            data-tools="Power BI, Visio, Data Modeling, KPI Design"
            data-bullets="Strategic analysis and operational decision-making for aviation programs|Data modeling with Power BI and Visio for cross-functional reporting|Developed KPI frameworks tracking program-level performance">
            <p class="htl-card__co">Bell Flight</p>
            <h3 class="htl-card__role">Summer Business Analyst</h3>
            <time class="htl-card__date">May – Aug 2023</time>
            <p class="htl-card__desc">Operational decision-making through data modeling, KPI development, and cross-functional reporting.</p>
            <div class="htl-tip" id="tip-bell" role="tooltip">
              <p class="htl-tip__heading">Tools &amp; Impact</p>
              <ul class="htl-tip__tools"><li>Power BI</li><li>Visio</li><li>Data Modeling</li></ul>
              <div class="htl-tip__highlight">
                <span class="htl-tip__highlight-label">Key Achievement:</span>
                Strategic analysis and operational decision-making for aviation programs
              </div>
              <ul class="htl-tip__bullets">
                <li>Data modeling with Power BI and Visio for cross-functional reporting</li>
                <li>Developed KPI frameworks tracking program-level performance</li>
              </ul>
            </div>
          </article>

        </div>
        <!-- Mobile bottom-sheet backdrop -->
        <div class="htl-backdrop" id="htlBackdrop" aria-hidden="true"></div>
      </div>
    </section>

    <!-- ============ SKILLS ============ -->
    <section class="section" id="skills">
      <div class="container">
        <header class="section__head">
          <span class="label">Capabilities</span>
          <h2>What I work with.</h2>
        </header>

        <div class="skills reveal">
          <div class="skills__col">
            <h3>Languages</h3>
            <ul><li>Python</li><li>SQL</li><li>R</li></ul>
          </div>
          <div class="skills__col">
            <h3>Analytics &amp; ML</h3>
            <ul><li>Machine Learning</li><li>Optimization</li><li>Statistical Modeling</li><li>NLP</li><li>Data Visualization</li></ul>
          </div>
          <div class="skills__col">
            <h3>Infrastructure &amp; Tools</h3>
            <ul><li>Streamlit</li><li>Snowflake</li><li>GitHub</li><li>Jupyter</li><li>Tableau</li></ul>
          </div>
        </div>

        <!-- Education inline -->
        <header class="section__head">
          <span class="label">EDUCATION</span>
          <h2>Education.</h2>
        </header>
        <div class="edu reveal">
          <div class="edu__item">
            <h4>MS Business Analytics</h4>
            <p>UT Austin · McCombs — Financial Analytics Track · <time>Jul 2025 – May 2026</time></p>
          </div>
          <div class="edu__item">
            <h4>BS Business Analytics &amp; Info Management</h4>
            <p>Purdue University · Daniels — <time>Aug 2021 – May 2025</time></p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ CONTACT ============ -->
    <section class="section section--alt" id="contact">
      <div class="container contact">
        <header class="section__head">
          <span class="label">Contact</span>
          <h2>Let's talk.</h2>
        </header>
        <p class="contact__sub">Open to analytics, consulting, product, and strategy roles.</p>
        <div class="contact__row">
          <div class="contact__email-group">
            <a href="mailto:jringler@utexas.edu" class="contact__link">jringler@utexas.edu</a>
            <button class="copy-btn" id="copyEmail" type="button" aria-label="Copy email address">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              <span>Copy</span>
            </button>
          </div>
          <a href="https://linkedin.com/in/joshuaringler" class="contact__link" target="_blank" rel="noopener">LinkedIn ↗</a>
          <a href="https://github.com/jringler30" class="contact__link" target="_blank" rel="noopener">GitHub ↗</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="ft">
    <div class="container ft__inner">
      <span>&copy; 2025 Joshua Ringler</span>
    </div>
  </footer>

  <!-- ============ MODAL ============ -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="modal__close" id="modalClose" aria-label="Close modal" type="button">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
      <div class="modal__img">
        <img id="modalImg" src="" alt="" />
      </div>
      <div class="modal__body">
        <h3 id="modalTitle" class="modal__title"></h3>
        <p id="modalDesc" class="modal__desc"></p>
        <ul id="modalStack" class="modal__stack"></ul>
        <a id="modalLink" href="#" class="btn" target="_blank" rel="noopener">View on GitHub →</a>
      </div>
    </div>
  </div>

  <!-- ============ TOAST ============ -->
  <div class="toast" id="toast" role="status" aria-live="polite">Email copied!</div>

  <!-- ============ JS ============ -->
  <script>
    (() => {
      /* --- Theme toggle --- */
      const html = document.documentElement;
      const themeBtn = document.getElementById('themeToggle');
      const saved = localStorage.getItem('theme');
      if (saved) html.dataset.theme = saved;
      else if (matchMedia('(prefers-color-scheme: dark)').matches) html.dataset.theme = 'dark';

      themeBtn.addEventListener('click', () => {
        const next = html.dataset.theme === 'dark' ? 'light' : 'dark';
        html.dataset.theme = next;
        localStorage.setItem('theme', next);
      });

      /* --- Smooth scroll --- */
      document.querySelectorAll('a[href^="#"]').forEach(a => {
        a.addEventListener('click', e => {
          const id = a.getAttribute('href');
          if (id === '#') return;
          const el = document.querySelector(id);
          if (!el) return;
          e.preventDefault();
          el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      });

      /* --- Active nav on scroll --- */
      const navLinks = document.querySelectorAll('[data-nav]');
      const sections = [...navLinks].map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);

      const navIO = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            navLinks.forEach(l => l.classList.remove('active'));
            const match = [...navLinks].find(l => l.getAttribute('href') === '#' + entry.target.id);
            if (match) match.classList.add('active');
          }
        });
      }, { threshold: 0.15, rootMargin: '-80px 0px -40% 0px' });
      sections.forEach(s => navIO.observe(s));

      /* --- Reveal on scroll --- */
      const revealIO = new IntersectionObserver(entries => {
        entries.forEach(e => {
          if (e.isIntersecting) { e.target.classList.add('in'); revealIO.unobserve(e.target); }
        });
      }, { threshold: 0.01, rootMargin: '0px 0px 0px 0px' });
      document.querySelectorAll('.reveal').forEach(el => revealIO.observe(el));

      /* --- Filter chips --- */
      const chips = document.querySelectorAll('.chip[data-filter]');
      const cards = document.querySelectorAll('.card[data-tags]');

      chips.forEach(chip => {
        chip.addEventListener('click', () => {
          chips.forEach(c => c.classList.remove('active'));
          chip.classList.add('active');
          const f = chip.dataset.filter;
          cards.forEach(card => {
            if (f === 'all' || card.dataset.tags.includes(f)) {
              card.classList.remove('hidden');
            } else {
              card.classList.add('hidden');
            }
          });
        });
      });

      /* --- Modal --- */
      const backdrop = document.getElementById('modalBackdrop');
      const modal = document.getElementById('modal');
      const modalImg = document.getElementById('modalImg');
      const modalTitle = document.getElementById('modalTitle');
      const modalDesc = document.getElementById('modalDesc');
      const modalStack = document.getElementById('modalStack');
      const modalLink = document.getElementById('modalLink');
      const modalClose = document.getElementById('modalClose');
      let lastFocused = null;

      function openModal(card) {
        lastFocused = document.activeElement;
        modalTitle.textContent = card.dataset.title;
        modalDesc.textContent = card.dataset.desc;
        modalImg.src = card.dataset.img;
        modalImg.alt = card.dataset.title + ' screenshot';
        modalLink.href = card.dataset.link;
        modalStack.innerHTML = card.dataset.stack.split(', ').map(s => `<li>${s}</li>`).join('');
        backdrop.classList.add('open');
        backdrop.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        modalClose.focus();
      }

      function closeModal() {
        backdrop.classList.remove('open');
        backdrop.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        if (lastFocused) lastFocused.focus();
      }

      cards.forEach(card => {
        card.addEventListener('click', () => openModal(card));
        card.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openModal(card); } });
      });

      modalClose.addEventListener('click', closeModal);
      backdrop.addEventListener('click', e => { if (e.target === backdrop) closeModal(); });
      document.addEventListener('keydown', e => {
        if (e.key === 'Escape' && backdrop.classList.contains('open')) closeModal();
      });

      /* Focus trap inside modal */
      modal.addEventListener('keydown', e => {
        if (e.key !== 'Tab') return;
        const focusable = modal.querySelectorAll('button, a[href], [tabindex]:not([tabindex="-1"])');
        const first = focusable[0];
        const last = focusable[focusable.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === first) { e.preventDefault(); last.focus(); }
        } else {
          if (document.activeElement === last) { e.preventDefault(); first.focus(); }
        }
      });

      /* --- Copy email --- */
      const copyBtn = document.getElementById('copyEmail');
      const toast = document.getElementById('toast');
      copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText('jringler@utexas.edu').then(() => {
          toast.classList.add('show');
          setTimeout(() => toast.classList.remove('show'), 2200);
        });
      });

      /* --- Horizontal Timeline --- */
      const htlTrack = document.getElementById('htlTrack');
      const htlPrev = document.getElementById('htlPrev');
      const htlNext = document.getElementById('htlNext');
      const htlProgress = document.getElementById('htlProgress');
      const htlIndicator = document.getElementById('htlIndicator');
      const htlCards = htlTrack.querySelectorAll('.htl-card');
      const htlCount = htlCards.length;
      const reducedMotion = matchMedia('(prefers-reduced-motion: reduce)').matches;

      function getScrollBehavior() {
        return reducedMotion ? 'auto' : 'smooth';
      }

      function updateHTL() {
        const { scrollLeft, scrollWidth, clientWidth } = htlTrack;
        const maxScroll = scrollWidth - clientWidth;
        const ratio = maxScroll > 0 ? scrollLeft / maxScroll : 0;

        // Progress bar
        const pct = Math.max(((ratio * (htlCount - 1)) + 1) / htlCount * 100, 100 / htlCount);
        htlProgress.style.width = pct + '%';

        // Current index (based on snap position)
        let currentIdx = 0;
        htlCards.forEach((card, i) => {
          const cardLeft = card.offsetLeft - htlTrack.offsetLeft;
          if (scrollLeft >= cardLeft - 40) currentIdx = i;
        });

        htlIndicator.textContent = (currentIdx + 1) + ' / ' + htlCount;

        // Arrow states
        htlPrev.disabled = scrollLeft <= 2;
        htlNext.disabled = scrollLeft >= maxScroll - 2;
      }

      function scrollToCard(idx) {
        const card = htlCards[idx];
        if (!card) return;
        const offset = card.offsetLeft - htlTrack.offsetLeft - parseInt(getComputedStyle(htlTrack).paddingLeft);
        htlTrack.scrollTo({ left: offset, behavior: getScrollBehavior() });
      }

      function getCurrentIdx() {
        const scrollLeft = htlTrack.scrollLeft;
        let idx = 0;
        htlCards.forEach((card, i) => {
          if (scrollLeft >= card.offsetLeft - htlTrack.offsetLeft - 40) idx = i;
        });
        return idx;
      }

      htlPrev.addEventListener('click', () => scrollToCard(Math.max(0, getCurrentIdx() - 1)));
      htlNext.addEventListener('click', () => scrollToCard(Math.min(htlCount - 1, getCurrentIdx() + 1)));

      htlTrack.addEventListener('scroll', updateHTL, { passive: true });

      // Keyboard navigation on track
      htlTrack.addEventListener('keydown', e => {
        if (e.key === 'ArrowRight') { e.preventDefault(); scrollToCard(Math.min(htlCount - 1, getCurrentIdx() + 1)); }
        if (e.key === 'ArrowLeft') { e.preventDefault(); scrollToCard(Math.max(0, getCurrentIdx() - 1)); }
      });

      // Initial state
      updateHTL();

      /* --- Mobile tap-to-toggle tooltip (bottom-sheet with backdrop) --- */
      const mobileTipQuery = matchMedia('(max-width: 768px), (hover: none) and (pointer: coarse)');
      const htlBackdrop = document.getElementById('htlBackdrop');

      function closeAllTips() {
        htlCards.forEach(c => c.classList.remove('tip-open'));
        if (htlBackdrop) htlBackdrop.classList.remove('visible');
        document.body.style.overflow = '';
      }

      htlCards.forEach(card => {
        card.addEventListener('click', e => {
          if (!mobileTipQuery.matches) return;
          e.stopPropagation();
          const wasOpen = card.classList.contains('tip-open');
          closeAllTips();
          if (!wasOpen) {
            card.classList.add('tip-open');
            if (htlBackdrop) htlBackdrop.classList.add('visible');
            document.body.style.overflow = 'hidden';
          }
        });
      });

      // Tap backdrop closes bottom-sheet
      if (htlBackdrop) {
        htlBackdrop.addEventListener('click', closeAllTips);
      }

      // Tap outside closes tooltip (mobile only)
      document.addEventListener('click', e => {
        if (!mobileTipQuery.matches) return;
        if (!e.target.closest('.htl-card') && !e.target.closest('.htl-tip')) {
          closeAllTips();
        }
      });

      // ESC closes any open mobile bottom-sheet
      document.addEventListener('keydown', e => {
        if (e.key === 'Escape' && mobileTipQuery.matches) closeAllTips();
      });

      mobileTipQuery.addEventListener('change', () => {
        if (!mobileTipQuery.matches) closeAllTips();
      });

    })();
  </script>

</body>
</html>
